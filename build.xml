<?xml version="1.0" encoding="UTF-8" ?>
<project name="edol" default="build" basedir=".">
  <property name="app.name" value="JBroFuzz" />
  
  <path id="master-classpath" description="Master Classpath">
    <fileset dir="lib">
      <include name="*.jar" />
    </fileset>
  </path>

  <target name="init" description="Setup for Build">
    <tstamp />
    <echo>Checking Directories</echo>
    <mkdir dir="bin" />
    <mkdir dir="jar" />
  </target>

  <target depends="init" name="compile" description="Compilation of Java">
    <echo>Compiling Java Files</echo>
    <javac srcdir="src" destdir="bin" debug="true" failonerror="true" classpathref="master-classpath" deprecation="true" source="1.5" target="1.5" />
  </target>

  <target depends="compile" name="archive">
    <echo>Creating Java Archive</echo>
    <jar compress="true" destfile="jar/${app.name}-${DSTAMP}.jar">
      <fileset dir="bin">
        <include name="**/*.class" />
      </fileset>
      <fileset dir="tar">
    	<include name="**/*.jbrofuzz" />
      </fileset>
        <zipfileset src="lib/commons-codec-1.3.jar" />
        <zipfileset src="lib/commons-httpclient-3.1.jar" />
        <zipfileset src="lib/commons-lang-2.3.jar" />
        <zipfileset src="lib/commons-io-1.3.2.jar" />
        <zipfileset src="lib/commons-logging-1.1.jar" />
        <zipfileset src="lib/junit-4.1.jar" />
        <zipfileset src="lib/ostermillerutils_1_06_00.jar" />
        <zipfileset src="lib/jcckit.jar" />
      <manifest>
        <attribute name="Main-Class" value="org.owasp.jbrofuzz.JBroFuzz" />
      	<attribute name="Build-By" value="subere@uncon.org" />
      </manifest>
    </jar>
  </target>

  <target name="clean">
    <delete verbose="true" failonerror="false" includeemptydirs="true">
      <fileset dir="bin" />
      <fileset dir="jar" />
    </delete>
  </target>

  <target depends="clean,init,compile,archive" name="build" />

</project>
