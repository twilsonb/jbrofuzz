<?xml version="1.0" encoding="UTF-8" ?>
<project name="edol" default="build" basedir=".">
	<property name="app.name" value="JBroFuzz" />

	<path id="master-classpath" description="Master Classpath">
		<fileset dir="lib">
			<include name="*.jar" />
		</fileset>
		<fileset dir="launch4j">
			<include name="*.jar" />
		</fileset>
	</path>
	
	<javadoc packagenames="org.owasp.jbrofuzz.*"
	           sourcepath="src"
	           defaultexcludes="yes"
	           destdir="doc"
	           author="true"
	           version="true"
	           use="true"
	           windowtitle="JBroFuzz API">
	    
		<doctitle><![CDATA[<h1>JBroFuzz</h1>]]></doctitle>
	    <bottom><![CDATA[<i>Copyright &#169; 2008 The OWASP Foundation</i>]]></bottom>
	    <tag name="todo" scope="all" description="To do:"/>
	    <group title="JBroFuzz Packages" packages="org.owasp.jbrofuzz.*"/>
	    <link href="http://developer.java.sun.com/developer/products/xml/docs/api/"/>
	
	</javadoc>

	<target name="init" description="Setup for Build">
		<tstamp />
		<echo>Checking Directories</echo>
		<mkdir dir="bin" />
		<mkdir dir="jar" />
	</target>

	<target depends="init" name="compile" description="Compilation of Java Classes">
		<echo>Compiling Java Files</echo>
		<javac srcdir="src" destdir="bin" debug="true" failonerror="true" classpathref="master-classpath" deprecation="true" source="1.6" target="1.6" />
	</target>

	<target depends="compile" name="archive" description="Creation of the Main JAR File">
		<echo>Creating Java Archive</echo>
		<jar compress="true" destfile="jar/${app.name}.jar">
			<fileset dir="bin">
				<include name="**/*.class" />
			</fileset>
			<fileset dir="tar">
				<include name="**/*.jbrofuzz" />
			</fileset>
			<fileset dir="">
				<include name="help/*.html" />
				<include name="LICENSE/*.txt" />
				<include name="release/splashscreen.png" />
			</fileset>
			<zipfileset src="lib/commons-codec-1.3.jar" />
			<zipfileset src="lib/commons-httpclient-3.1.jar" />
			<zipfileset src="lib/commons-lang-2.3.jar" />
			<zipfileset src="lib/commons-io-1.3.2.jar" />
			<zipfileset src="lib/commons-logging-1.1.jar" />
			<zipfileset src="lib/junit-4.1.jar" />
			<zipfileset src="lib/ostermillerutils_1_06_00.jar" />
			<zipfileset src="lib/jcckit.jar" />
			<manifest>
				<attribute name="Main-Class" value="org.owasp.jbrofuzz.JBroFuzz" />
				<attribute name="Build-By" value="subere@uncon.org" />
				<attribute name="SplashScreen-Image" value="release/splashscreen.png" />
			</manifest>
		</jar>
	</target>
	
	<target name="exe" depends="archive" description="Creation of the Main EXE File">
		<echo>Creating Executable</echo>
		<taskdef name="launch4j" classname="net.sf.launch4j.ant.Launch4jTask" classpathref="master-classpath" />
		<launch4j configFile="./release/launch4j.xml" />
	</target>

	<target name="clean" description="Removing the /bin and /jar directory contents">
		<delete verbose="true" failonerror="false" includeemptydirs="true">
			<fileset dir="bin" />
			<fileset dir="jar" />
		</delete>
	</target>

	<target depends="clean,init,compile,archive,exe" name="build" />

</project>
